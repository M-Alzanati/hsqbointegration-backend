AWSTemplateFormatVersion: "2010-09-09"
Description: Create Secrets Manager secrets for HubSpot-QuickBooks backend (bootstrap once)

Resources:
  DataBasePasswordSecret:
    Type: AWS::SecretsManager::Secret
    DeletionPolicy: Retain
    Properties:
      Name: docdb/password
      Description: Database Password for DocumentDB (auto-generated JSON with key 'password')
      GenerateSecretString:
        GenerateStringKey: password
        PasswordLength: 32
        ExcludePunctuation: true

  ServiceApiKeySecret:
    Type: AWS::SecretsManager::Secret
    DeletionPolicy: Retain
    Properties:
      Name: service/api/key
      Description: API Key for Backend Service (default placeholder)
      SecretString: '{"API_KEY":""}'

  QuickbookClientIdSecret:
    Type: AWS::SecretsManager::Secret
    DeletionPolicy: Retain
    Properties:
      Name: quickbooks/client/id
      Description: QuickBooks Client ID (default placeholder)
      SecretString: '{"QUICKBOOKS_CLIENT_ID":""}'

  QuickbookClientKeySecret:
    Type: AWS::SecretsManager::Secret
    DeletionPolicy: Retain
    Properties:
      Name: quickbooks/client/secret
      Description: QuickBooks Client Secret (default placeholder)
      SecretString: '{"QUICKBOOKS_CLIENT_SECRET":""}'

  HubspotApiKeySecret:
    Type: AWS::SecretsManager::Secret
    DeletionPolicy: Retain
    Properties:
      Name: hubspot/api/key
      Description: HubSpot Private App Token (default placeholder)
      SecretString: '{"HUBSPOT_API_KEY":""}'

Outputs:
  DocDBPasswordSecretName:
    Value: docdb/password
    Description: Name of the DocumentDB password secret
  ServiceApiKeySecretName:
    Value: service/api/key
    Description: Name of the service API key secret
  QuickBooksClientIdSecretName:
    Value: quickbooks/client/id
    Description: Name of the QuickBooks client ID secret
  QuickBooksClientSecretName:
    Value: quickbooks/client/secret
    Description: Name of the QuickBooks client secret
  HubSpotApiKeySecretName:
    Value: hubspot/api/key
    Description: Name of the HubSpot API key secret
